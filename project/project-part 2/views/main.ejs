<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Home page</title>
        <link rel="stylesheet" href="/css-reset.css">
        <link rel="stylesheet" href="/css/style.css">
    </head>
    <body>
        <nav>
            <ul><a href="main">Main</a></ul>
            <ul><a href="register">Register</a></ul>  
            <ul><a href="about">About</a></ul>
            <ul><a href="helpPage">Help Page</a></ul>    
        </nav>

        <h1>Search for Patients</h1>
        <form>
            <label for="Pid">Enter the ID of the patient:</label>
            <input type="text" name="Pid" id="Pid" placeholder="Patient ID">
            <button type="button" onclick="searchPatient()">Search</button>
        </form>

        <section id="resultSection">
            <h2>Search Results</h2>
            <table id="resultTable" border="1">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Department</th>
                    </tr>
                </thead>
                <tbody id="resultBody">
                    <!-- Results will be dynamically inserted here -->
                </tbody>
            </table>
        </section>

        <p>Done by: Hussain Alsari, Feras Alswalim, Mazn Alasmari, Abdulwahab Alharthy</p>
        <p>2024 &copy; Omega</p>
        <footer></footer>

        <script>
            async function searchPatient() {
                const patientId = document.getElementById('Pid').value;
                const response = await fetch(`/api/patients/${patientId}`);
                const patient = await response.json();

                if (patient) {
                    const resultBody = document.getElementById('resultBody');
                    resultBody.innerHTML = `
                        <tr>
                            <td>${patient.Pid}</td>
                            <td>${patient.first_name}</td>
                            <td>${patient.last_name}</td>
                            <td>${patient.email}</td>
                            <td>${patient.phone_number}</td>
                            <td>${patient.department}</td>
                        </tr>
                    `;
                } else {
                    alert('No patient found with this ID');
                }
            }
        </script>
    </body>
</html>
